# PWA 渐进式网页应用(Progressive Web App)

渐进式 +Web 应用

## 1 什么是渐进式

- 站在 Web 应用开发者来说，PWA 提供了一个渐进式的过渡方案，让 Web 应用能逐步具有本地应用的能力。采取渐进式可以降低站点改造的代价，使得站点逐步支持各项新技术，而不是一步到位。
- 站在技术角度来说，PWA 技术也是一个渐进式的演化过程，在技术层面会一点点演进，比如逐渐提供更好的设备特性支持，不断优化更加流畅的动画效果，不断让页面的加载速度变得更快，不断实现本地应用的特性

它是一套理念，渐进式增强 Web 的优势，并通过技术手段渐进式缩短和本地应用或者小程序的距离



## 2 采用了哪些技术手段

缩短它和本地应用或者小程序的距离。

### Web 页面到底缺少了什么

- 首先，Web 应用缺少**离线使用能力**，在离线或者在弱网环境下基本上是无法使用的
- Web 应用还缺少了消息推送的能力，因为作为一个 App 厂商，需要有将消息送达到应用的能力。
- Web 应用缺少**一级入口**，也就是将 Web 应用安装到桌面，在需要的时候直接从桌面打开 Web 应用，而不是每次都需要通过浏览器来打开。

### PWA 解决方案

- 通过引入 **Service Worker** 来试着**解决离线存储和消息推送的问题**
- 通过引入 **manifest.json** 来解决一级入口的问题

### 实现方式

- 离线能力—基于service worker
  - “让其运行在主线程之外”就是 Service Worker 来自 Web Worker 的一个核心思想
  - Service Worker 需要在 Web Worker 的基础之上加上储存功能。
  - Service Worker 还需要会为多个页面提供服务，目前的 Chrome 架构中，Service Worker 是运行在浏览器进程中的，因为浏览器进程生命周期是最长的，所以在浏览器的生命周期内，能够为所有的页面提供服务。
- 消息推送—基于service worker
  - 也是基于 Service Worker 来实现的。
  - 因为消息推送时，浏览器页面也许并没有启动，这时就需要 Service Worker 来接收服务器推送的消息，并将消息通过一定方式展示给用户
- 一级入口
  - 提供了 manifest.json 配置文件，
  - 可以让开发者自定义桌面的图标、显示名称、启动方式等信息，
  - 还可以设置启动画面、页面主题颜色等信息。
- 安全
  - Service Worker 采用 **HTTPS** 协议，因为采用 HTTPS 的通信数据都是经过加密的，即便拦截了数据，也无法破解数据内容，而且 HTTPS 还有校验机制，通信双方很容易知道数据是否被篡改
  - Service Worker 还需要同时支持 **Web 页面默认的安全策略、储入同源策略、内容安全策略（CSP）**















